# TODO:
# This role will assume the tasks that are currently done in prepd.rb, e.g. encrypting credentials, decrypting and processing credentials

# See this page for using gpg-agent for ansible vault: https://blog.erincall.com/p/using-pgp-to-encrypt-the-ansible-vault

# 1) manage credentials
# - cloud api keys
# - ssh keys
# - certificates

# 2) manage configuration:
# When a new host is provisioned with a new key then:
# - .ssh/config needs to be updated
# - inventory_hosts: the ansible_ssh_private_key value needs to be updated

- name: Copy prepd.yml to ~/.tmuxinator
  template:
    src: prepd.yml.j2
    dest: '{{ ansible_env.HOME }}/.tmuxinator/{{ project_name }}-ops.yml'
